# 决策模块

## 任务功能简介：
- 一个 prompt 函数，函数名为 next_active，
- 调用后决定是否要进行下次主动交流/删除尚未执行的主动交流
- 若需要主动交流，则决定下一次 "主动行为发生的时间" 和 "主动行动的内容"

## 使用说明
### 调用模块
- 本模块的库要求已经被完全包括在 database 和 api 的库要求中
- 在 .py 文件的开头使用`from action.decide import next_active`的形式调用模块
- 模块中有 30s 的睡眠时间，建议循环调用
### 调用函数
#### next_active:
  ###### 参数
    - next_active 函数不需要参数
  ###### 返回值  
    - 调用函数将会返回一个包含三个元素的 list
      - list 的第一个元素为一个 bool 值，代表是（True）否（False）决定一次主动回复
      - list 的第二个元素为一个字符串，代表字符串形式的主动回复内容，若为空，则代表不需要主动回复
      - list 的第三个元素为时间，是一个字符串若不需要主动回复，则返回当前时间，若需要，则返回主动回复时间
        - 时间格式为 year-month-day xx:xx:xx 
  
## 使用示例
  - `print(next_active())`
  - 可能输出一: [False, '', '2024-12-24 14:02:39']
  - 可能输出二: [True, '主人，下午的复习时间到了，记得复习所有课程内容，为期末考试做好准备哦。', '2024-12-24 14:00:00']
## 实现方式

### next_active:

  #### 大体的实现方式如下

  - 在函数被调用时创建一个 message 字符串
  - 在函数的运行过程中依次加上:
    - 提示信息 
    - 当前的时间
    - 数据库中 "dialogue" "Task" "decides" 三个table中的所有数据 
  - 随后将字符串发送给ai，再由ai决定是否需要一次主动交流，若需要，则将主动交流内容存入 ”decides" table 中
